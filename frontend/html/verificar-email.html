<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Verificar Email | Musimundo Travel</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="../css/login.css">
  <style>
    .verify-container {
      max-width: 400px;
      margin: 4rem auto;
      background: #fff;
      border-radius: 1rem;
      box-shadow: 0 2px 24px #0002;
      padding: 2.5rem 2rem 2rem 2rem;
      text-align: center;
    }
    .verify-container h1 {
      margin-bottom: 1rem;
    }
    .verify-container input {
      width: 100%;
      padding: 0.7rem;
      margin: 0.5rem 0 1rem 0;
      border-radius: 0.5rem;
      border: 1px solid #ccc;
      font-size: 1rem;
    }
    .verify-container .btn {
      width: 100%;
      margin-bottom: 0.5rem;
    }
    .verify-container .info {
      color: #555;
      font-size: 0.95rem;
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <div class="verify-container">
    <i class="fas fa-envelope-open-text" style="font-size:2.5rem;color:#007bff;"></i>
    <h1>Verifica tu Email</h1>
    <div class="info">Esta página procesa la verificación de tu correo electrónico. Si has recibido un email de verificación, haz clic en el enlace proporcionado en ese correo. Si el token es válido, tu email será verificado automáticamente.</div>
    <div id="verifyMessage" style="margin-top:1rem; font-size: 1.1rem;"></div>
    <p style="margin-top: 1rem;">Si no has recibido el email o el enlace ha expirado, puedes solicitar uno nuevo desde la página anterior o intentar iniciar sesión de nuevo para que se te solicite la verificación.</p>
    <a href="login.html" style="display:block;margin-top:1.5rem;color:#007bff;">Volver a iniciar sesión</a>
  </div>
  <script src="../js/verificar-email.js"></script>
  <script>
    // Ensure the form and resend button are hidden by default if JS is enabled,
    // as the verificar-email.js script handles the visibility logic based on URL token.
    // This is a fallback for the script's own logic.
    document.addEventListener('DOMContentLoaded', function() {
      const verifyForm = document.getElementById('verifyForm');
      const resendBtn = document.getElementById('resendBtn');
      if (verifyForm) {
        verifyForm.style.display = 'none';
      }
      if (resendBtn) {
        resendBtn.style.display = 'none';
      }

      // The script verificar-email.js will display messages in #verifyMessage.
      // If no token is found in URL, it will show the form and resend button.
      // We want to avoid showing the form at all, as per user request.
      // So, if after a brief moment the verifyMessage is empty and the form is visible
      // (meaning no token was processed and the script made them visible),
      // we ensure the form is hidden and provide a generic message.

      const params = new URLSearchParams(window.location.search);
      const urlToken = params.get('token');
      if (!urlToken) {
        // If no token in URL, the script might show the form. We override this.
        if (verifyForm) verifyForm.style.display = 'none';
        if (resendBtn) resendBtn.style.display = 'none';

        const verifyMessageDiv = document.getElementById('verifyMessage');
        // Check if the main script has already put a message
        if (verifyMessageDiv && verifyMessageDiv.textContent.trim() === "") {
             verifyMessageDiv.innerHTML = 'Por favor, verifica tu correo electrónico haciendo clic en el enlace que te enviamos. Si necesitas un nuevo enlace, solicítalo desde la pantalla anterior.';
             verifyMessageDiv.style.color = '#555';
        }
      }
    });
  </script>
</body>
</html>
